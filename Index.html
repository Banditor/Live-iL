<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>רשימת ערוצים</title>
</head>
<body>
    <h1>רשימת ערוצים</h1>
    <div id="channel-list">טוען ערוצים...</div>

    <script>
        async function loadChannels() {
            const response = await fetch('https://raw.githubusercontent.com/Fishenzon/repo/master/zips/plugin.video.idanplus/resources/idan.m3u');
            const m3uData = await response.text();
            const channelList = document.getElementById('channel-list');
            const channels = parseM3U(m3uData);
            channelList.innerHTML = channels.map(channel => `
                <div>
                    <a href="${channel.url}" target="_blank">${channel.name}</a>
                </div>
            `).join('');
        }

        function parseM3U(m3u) {
            const lines = m3u.split('\n');
            const channels = [];
            let currentChannel = null;
            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    currentChannel = { name: line.split(',')[1] };
                } else if (line && currentChannel) {
                    currentChannel.url = line;
                    channels.push(currentChannel);
                    currentChannel = null;
                }
            });
            return channels;
        }

        loadChannels();
    </script>
</body>
</html>
